<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FS - File Manager</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
<style>
/* ===== Base Styles ===== */
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f0f2f5;
    margin: 0;
    padding: 0;
    color: #333;
    display: flex;
    min-height: 100vh;
}

/* ===== Sidebar ===== */
aside {
    width: 250px;
    background: #1e88e5;
    color: white;
    padding: 25px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    box-shadow: 4px 0 12px rgba(0,0,0,0.1);
}
aside h2 {
    font-size: 22px;
    margin: 0 0 15px;
}
aside nav a {
    display: block;
    padding: 10px 0;
    color: white;
    text-decoration: none;
    font-weight: 500;
    transition: opacity 0.2s;
}
aside nav a:hover {
    opacity: 0.8;
}
aside .auths {
    margin-top: 40px;
    font-size: 14px;
    opacity: 0.8;
}
.auths code {
    display: block;
    background: rgba(255,255,255,0.1);
    padding: 5px;
    border-radius: 6px;
    margin-top: 5px;
    word-break: break-all;
}

/* ===== Main Content ===== */
main {
    flex: 1;
    padding: 30px;
    overflow-y: auto;
}

header {
    font-size: 28px;
    font-weight: 700;
    margin-bottom: 25px;
    color: #1e88e5;
}

/* ===== Controls ===== */
.controls {
    display: flex;
    justify-content: space-between;
    margin-bottom: 25px;
    flex-wrap: wrap;
    gap: 10px;
}
button, input[type="url"] {
    padding: 10px 15px;
    border-radius: 8px;
    border: none;
    font-size: 14px;
    font-weight: 500;
}
button {
    background: #1e88e5;
    color: white;
    cursor: pointer;
    transition: background 0.2s;
}
button:hover {
    background: #1565c0;
}
input[type="url"] {
    flex: 1;
    border: 1px solid #ccc;
}

/* ===== File List ===== */
.file-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 20px;
    padding: 0;
    list-style: none;
}

/* ===== File Item ===== */
.file-item {
    background: #fff;
    border-radius: 14px;
    padding: 20px 15px 25px 15px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    box-shadow: 0 4px 16px rgba(0,0,0,0.06);
    position: relative;
    transition: transform 0.2s, box-shadow 0.2s;
}
.file-item:hover {
    transform: translateY(-6px);
    box-shadow: 0 10px 30px rgba(0,0,0,0.12);
}
.file-name {
    font-size: 16px;
    font-weight: 500;
    margin-bottom: 15px;
    word-break: break-word;
}
.file-type {
    position: absolute;
    top: 15px;
    right: 15px;
    padding: 5px 10px;
    border-radius: 8px;
    font-size: 12px;
    font-weight: 600;
    color: white;
    display: flex;
    align-items: center;
    gap: 5px;
    text-transform: uppercase;
}
.download-btn {
    background: #1e88e5;
    color: white;
    border: none;
    padding: 10px 15px;
    border-radius: 8px;
    text-align: center;
    text-decoration: none;
    font-weight: 500;
    cursor: pointer;
    transition: background 0.2s, transform 0.15s;
}
.download-btn:hover {
    background: #1565c0;
    transform: translateY(-2px);
}

/* File type colors */
.file-type.pdf { background: #e74c3c; }
.file-type.docx { background: #3498db; }
.file-type.xlsx { background: #27ae60; }
.file-type.png, .file-type.jpg, .file-type.jpeg, .file-type.gif { background: #f39c12; }
.file-type.zip { background: #9b59b6; }
.file-type.exe { background: #e67e22; }
.file-type.txt { background: #7f8c8d; }
.file-type.default { background: #95a5a6; }
</style>
</head>
<body>

<aside>
    <div>
        <h2>FS</h2>
        <nav>
            <a href="#">Files</a>
            <a href="#">Upload</a>
        </nav>
    </div>
    <div class="auths">
        <strong>Auths</strong>
        <code>3547348325008864</code>
    </div>
</aside>

<main>
    <header>File Manager</header>

    <div class="controls">
        <button id="downloadAll">â¬‡ Download All</button>
        <input type="url" id="directUrl" placeholder="Paste direct download link...">
        <button id="addLink">+ Add Link</button>
    </div>

    <ul class="file-list" id="fileList"></ul>
</main>

<script>
// File type icons
const icons = {
    pdf: `<svg viewBox="0 0 24 24"><path d="M6 2h9l5 5v15a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z"/></svg>`,
    docx: `<svg viewBox="0 0 24 24"><path d="M6 2h9l5 5v15a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z"/></svg>`,
    xlsx: `<svg viewBox="0 0 24 24"><path d="M6 2h9l5 5v15a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z"/></svg>`,
    default: `<svg viewBox="0 0 24 24"><path d="M6 2h9l5 5v15a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z"/></svg>`
};

// File cache
let fileCache = [];

// Get file type by extension
function getFileType(fileName) {
    const ext = fileName.split('.').pop().toLowerCase();
    return icons[ext] ? ext : 'default';
}

// Render file card
function renderFile(fileName, urlOverride = null) {
    const type = getFileType(fileName);
    const li = document.createElement('li');
    li.className = 'file-item';
    li.innerHTML = `
        <span class="file-name">${fileName}</span>
        <span class="file-type ${type}">${icons[type]} ${type.toUpperCase()}</span>
        <a href="${urlOverride || "files/" + fileName}" class="download-btn" target="_blank">Download</a>
    `;
    document.getElementById('fileList').appendChild(li);
}

// Load local files
fetch('files.json')
    .then(res => res.json())
    .then(files => {
        fileCache = files;
        files.forEach(renderFile);
    })
    .catch(err => console.error('Error loading file list:', err));

// Load external links
fetch('links.json')
    .then(res => res.json())
    .then(links => {
        links.forEach(link => {
            const fileName = link.split('/').pop().split('?')[0] || "download";
            renderFile(fileName, link);
        });
    })
    .catch(err => console.error('Error loading links:', err));

// Download all as ZIP (only local files, not external links)
document.getElementById('downloadAll').addEventListener('click', async () => {
    if (!fileCache.length) return alert("No local files to download.");
    const zip = new JSZip();
    for (const fileName of fileCache) {
        const url = `files/${fileName}`;
        try {
            const res = await fetch(url);
            const blob = await res.blob();
            zip.file(fileName, blob);
        } catch {
            console.warn("Failed to fetch " + fileName);
        }
    }
    const content = await zip.generateAsync({ type: "blob" });
    saveAs(content, "all_files.zip");
});

// Add direct link manually
document.getElementById('addLink').addEventListener('click', () => {
    const input = document.getElementById('directUrl');
    if (!input.value) return;
    const url = input.value;
    const fileName = url.split('/').pop().split('?')[0] || "download";
    renderFile(fileName, url);
    input.value = "";
});
</script>

</body>
</html>
